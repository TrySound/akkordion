/*!
 * akkordion 0.1.3
 * Accordion UI Element
 * https://github.com/TrySound/akkordion
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(t){window.akkordion=t(window,document)}(function(t,e,n){function o(t,e){var n=this;n.root=t,n.options=f({},e,c(t)),n.cache(),n.setDefaultState(),n.bindEvents(),u("init",n)}function r(t,n){var r,n=f({},h,n);for("string"==typeof t&&(t=e.querySelectorAll(t)),i=0,max=t.length;i<max;i++)r=t[i],l(r,y)||(l(r,y,!0),S.push(new o(r,n)))}function u(t,e,n){var o,i,r=d[t],u=e.root,s=e.titleSet[n],l=e.contentSet[n],a=!0;for(o=0,i=r.length;i>o;o++)a=r[o].call(u,s,l)===!1?!1:a;return a}function s(t,e,n){n=n?!0:null,l(t.titleSet[e],m,n),l(t.outerSet[e],m,n),l(t.contentSet[e],m,n)}function l(t,e,o){return e="data-"+g+"-"+e,o===n?t.hasAttribute(e):null===o?t.removeAttribute(e):t.setAttribute(e,o)}function a(t,e,n){t.addEventListener(e,n,!1)}function f(){var t,e,o,i,r=arguments[0]||{};for(t=1,e=arguments.length;e>t;t++)if(o=arguments[t],null!=o)for(i in o)o.hasOwnProperty(i)&&o[i]!==n&&(r[i]=o[i]);return r}function c(t){var e,n,o,i=t.attributes,r="data-"+g+"-",u={};for(e=i.length;e--;)n=i[e].name,o=i[e].value,0===n.indexOf(r)&&(u[n.substring(r.length)]="true"===o?!0:"false"===o?!1:isNaN(o)?o:Number(o));return u}var h={single:!0,speed:300,hover:!1},d={init:[],abort:[],beforeopen:[],open:[],afteropen:[],beforeclose:[],close:[],afterclose:[]},g="akkordion",p=!1,v=!1,m="active",b="animating",y="initialized";!function(){var t=e.createElement("div");t.style.WebkitTransition!==n&&(p="-webkit-transition",v="webkitTransitionEnd"),t.style.transition!==n&&(p="transition",v="transitionend")}(),o.prototype={cache:function(){var t,n,o,i,r=this,u=r.root,s=u.querySelectorAll("."+g+"-title"),l=e.createElement("div"),a=[],f=[],c=[];for(l.className=g+"-outer",t=s.length-1;t>-1;t--)(n=s[t]).parentNode===u&&(o=(o=n.nextSibling)?1===o.nodeType?o:(o=o.nextSibling)&&1===o.nodeType?o:null:null,o=o&&o.className.indexOf(g+"-content")>-1?o:null,o&&(a.unshift(n),i=l.cloneNode(),i.appendChild(u.replaceChild(i,o)),c.unshift(i),f.unshift(o)));r.titleSet=a,r.outerSet=c,r.contentSet=f},setDefaultState:function(){var t,e=this,n=e.outerSet,o=e.contentSet;for(t=n.length-1;t>-1;t--)o[t].style.height="auto",o[t].className.indexOf(g+"-active")>-1&&(s(e,t,!0),n[t].style.height="auto")},bindEvents:function(){function t(t){var e=t.target,o=n.titleSet.indexOf(e);e.className.indexOf(g+"-title")>-1&&t.preventDefault(),o>-1&&(l(e,m)?n.close(o):n.open(o))}var e,n=this;a(n.root,"mouseover",function(o){var i=n.options.hover;i!==!1&&(e=setTimeout(function(){t(o)},i))}),a(n.root,"mouseout",function(){clearTimeout(e)}),a(n.root,"click",t),a(n.root,v,function(t){var e,o=t.target;"height"===t.propertyName&&(e=n.outerSet.indexOf(o))>-1&&(l(o,b,null),l(o,m)?(o.style.cssText="height:auto;",u("afteropen",n,e)):(o.style.cssText="",u("afterclose",n,e)))})},open:function(t,e){var n,o,i,r=this,a=r.outerSet,f=r.options,c=f.speed;if(t=-1===t?a.length-1:t,i=a[t],!i)return!1;if(f.single)for(o=a.length-1;o>-1;o--)o!==t&&r.close(o,e);if(!p||e||0===c){if(!u("beforeopen",r,t))return void u("abort",r,t);s(r,t,!0),i.style.cssText="height:auto;",u("open",r,t),u("afteropen",r,t)}else if(!l(i,b)&&!l(i,m)){if(!u("beforeopen",r,t))return void u("abort",r,t);s(r,t,!0),l(i,b,!0),i.style.height="auto",n=getComputedStyle(i).height,i.style.height=0,i.offsetWidth,i.style.cssText="height:"+n+";"+p+"-duration:"+c+"ms;",u("open",r,t)}},close:function(t,e){var n=this,o=n.outerSet,i=n.options.speed;if(t=-1===t?o.length-1:t,outer=o[t],!outer)return!1;if(!p||e||0===i){if(!u("beforeclose",n,t))return void u("abort",n,t);s(n,t,!1),outer.style.cssText="",u("close",n,t),u("afterclose",n,t)}else if(!l(outer,b)&&l(outer,m)){if(!u("beforeclose",n,t))return void u("abort",n,t);s(n,t,!1),l(outer,b,!0),outer.style.height=getComputedStyle(outer).height,outer.offsetHeight,outer.style.cssText=p+"-duration:"+i+"ms;",u("close",n,t)}}};var S=[];return r.on=function(t,e){var n=d[t=t.toLowerCase()];return n&&"function"==typeof e&&n.push(e),r},r.open=function(t,e,n){if(t)for(i=S.length-1;i>-1;i--)if(S[i].root===t)return S[i].open(Number(e),n)!==!1},r.close=function(t,e,n){if(t)for(i=S.length-1;i>-1;i--)if(S[i].root===t)return S[i].close(Number(e),n)!==!1},a(e,"DOMContentLoaded",function(){r("."+g)}),r});
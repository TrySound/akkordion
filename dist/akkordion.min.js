/*!
 * akkordion 0.2.5
 * Accordion UI Element
 * https://github.com/TrySound/akkordion
 * 
 * Released under the MIT license
 * Copyright (c) 2015, Bogdan Chadkin <trysound@yandex.ru>
 */
!function(t){window.akkordion=t(window,document)}(function(t,e,n){function o(t,e){var n=this;n.root=t,n.options=c({},e,h(t)),n.cache(),n.bindEvents(),u("init",n)}function r(t,n){var r,n=c({},d,n);for("string"==typeof t&&(t=e.querySelectorAll(t)),i=0,max=t.length;i<max;i++)r=t[i],l(r,S)||(l(r,S,!0),b.push(new o(r,n)))}function s(t,e,n,o){var r,s;if(t)for(i=b.length-1;i>-1;i--)if(b[i].root===t)return r=b[i],Number.isInteger(e)||((s=r.titleSet.indexOf(e)>-1)?e=s:(s=r.contentSet.indexOf(e)>-1)&&(e=s)),!!r[o](Number(e),n)}function u(t,e,n){var o,i,r=p[t],s=e.root,u=e.titleSet[n],a=e.contentSet[n],l=!0;for(o=0,i=r.length;i>o;o++)l=r[o].call(s,u,a)===!1?!1:l;return l}function a(t,e,n){n=n?!0:null,l(t.titleSet[e],x,n),l(t.outerSet[e],x,n),l(t.contentSet[e],x,n)}function l(t,e,o){return e="data-"+g+"-"+e,o===n?t.hasAttribute(e):null===o?t.removeAttribute(e):t.setAttribute(e,o)}function f(t,e,n){t.addEventListener(e,n,!1)}function c(){var t,e,o,i,r=arguments[0]||{};for(t=1,e=arguments.length;e>t;t++)if(o=arguments[t],null!=o)for(i in o)o.hasOwnProperty(i)&&o[i]!==n&&(r[i]=o[i]);return r}function h(t){var e,n,o,i=t.attributes,r="data-"+g+"-",s={};for(e=i.length;e--;)n=i[e].name,o=i[e].value,0===n.indexOf(r)&&(s[n.substring(r.length)]="true"===o?!0:"false"===o?!1:isNaN(o)?o:Number(o));return s}var d={single:!0,speed:350,hover:!1},p={init:[],beforeopen:[],open:[],afteropen:[],beforeclose:[],close:[],afterclose:[]},g="akkordion",v=!1,m=!1,x="active",y="animating",S="initialized";!function(){var t=e.createElement("div");t.style.transition!==n&&(v="transition",m="transitionend")}(),o.prototype={cache:function(){var t,n,o,i,r,s=this,u=s.root,l=u.children,f=e.createElement("div"),c=[],h=[],d=[];for(s.titleSet=c,s.outerSet=d,s.contentSet=h,f.className=g+"-outer",n=l.length-1;n>-1;n--)o=l[n],o.className.split(" ").indexOf(g+"-title")>-1&&(t=(i=o.nextElementSibling).className.split(" "),t.indexOf(g+"-content")>-1&&(c.unshift(o),h.unshift(i),d.unshift(r=f.cloneNode()),r.appendChild(u.replaceChild(r,i)),i.style.height="auto",t.indexOf(g+"-active")>-1&&(a(s,0,!0),r.style.height="auto")))},bindEvents:function(){function t(t){for(var e,i=n.titleSet,r=t.target,s=r;o!==s&&!((e=i.indexOf(s))>-1);)s=s.parentNode;e>-1&&(l(s,x)?n.close(e):n.open(e),t.preventDefault())}var e,n=this,o=n.root,i=n.options.hover;i!==!1&&(f(o,"mouseover",function(n){e=setTimeout(function(){t(n)},i)}),f(o,"mouseout",function(){clearTimeout(e)})),f(o,"click",t),f(o,m,function(t){var e,o=t.target;"height"===t.propertyName&&(e=n.outerSet.indexOf(o))>-1&&(l(o,y,null),l(o,x)?(o.style.cssText="height:auto;",u("afteropen",n,e)):(o.style.cssText="",u("afterclose",n,e)))})},open:function(t,e){var n,o,i,r=this,s=r.outerSet,f=r.options,c=f.speed;if(t=-1===t?s.length-1:t,i=s[t],f.single)for(o=s.length-1;o>-1;o--)o!==t&&r.close(o,e);return i&&!l(i,y)&&!l(i,x)&&u("beforeopen",r,t)?(a(r,t,!0),u("open",r,t),!v||e||0===c?(i.style.cssText="height:auto;",u("afteropen",r,t)):(i.style.height="auto",n=i.offsetHeight,0!==n&&(l(i,y,!0),i.style.height=0,i.offsetWidth,i.style.cssText="height:"+n+"px;"+v+"-duration:"+c+"ms;")),!0):void 0},close:function(t,e){var n=this,o=n.outerSet,i=n.options.speed;return t=-1===t?o.length-1:t,outer=o[t],outer&&!l(outer,y)&&l(outer,x)&&u("beforeclose",n,t)?(a(n,t,!1),u("close",n,t),!v||e||0===i?(outer.style.cssText="",u("afterclose",n,t)):(l(outer,y,!0),outer.style.height=outer.offsetHeight+"px",outer.offsetWidth,outer.style.cssText=v+"-duration:"+i+"ms;"),!0):void 0}};var b=[];return r.on=function(t,e){var n=p[t=t.toLowerCase()];return n&&"function"==typeof e&&n.push(e),r},r.open=function(t,e,n){s(t,e,n,"open")},r.close=function(t,e,n){s(t,e,n,"close")},f(e,"DOMContentLoaded",function(){r("."+g)}),r});